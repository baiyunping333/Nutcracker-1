<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Nutcracker: configuration.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script src="http://www.mathjax.org/mathjax/MathJax.js">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Nutcracker</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>configuration.cpp</h1>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//@+leo-ver=5-thin</span>
<a name="l00002"></a>00002 <span class="comment">//@+node:gcross.20110511190907.3708: * @file configuration.cpp</span>
<a name="l00003"></a>00003 <span class="comment">//@@language cplusplus</span>
<a name="l00004"></a>00004 
<a name="l00005"></a>00005 <span class="comment">//@+&lt;&lt; License &gt;&gt;</span>
<a name="l00006"></a>00006 <span class="comment">//@+node:gcross.20110511190907.3710: ** &lt;&lt; License &gt;&gt;</span>
<a name="l00007"></a>00007 <span class="comment">//@+at</span>
<a name="l00008"></a>00008 <span class="comment">// Copyright (c) 2011, Gregory Crosswhite</span>
<a name="l00009"></a>00009 <span class="comment">// All rights reserved.</span>
<a name="l00010"></a>00010 <span class="comment">// </span>
<a name="l00011"></a>00011 <span class="comment">// Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00012"></a>00012 <span class="comment">// </span>
<a name="l00013"></a>00013 <span class="comment">//     * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00014"></a>00014 <span class="comment">//     * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00015"></a>00015 <span class="comment">// </span>
<a name="l00016"></a>00016 <span class="comment">// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00017"></a>00017 <span class="comment">//@@c</span>
<a name="l00018"></a>00018 <span class="comment">//@-&lt;&lt; License &gt;&gt;</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="comment">//@+&lt;&lt; Includes &gt;&gt;</span>
<a name="l00021"></a>00021 <span class="comment">//@+node:gcross.20110511190907.3711: ** &lt;&lt; Includes &gt;&gt;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;boost/bind.hpp&gt;</span>
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;configuration.hpp&quot;</span>
<a name="l00025"></a>00025 <span class="comment">//@-&lt;&lt; Includes &gt;&gt;</span>
<a name="l00026"></a>00026 
<a name="l00027"></a>00027 <span class="keyword">namespace </span>Nutcracker {
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="comment">//@+&lt;&lt; Usings &gt;&gt;</span>
<a name="l00030"></a>00030 <span class="comment">//@+node:gcross.20110511190907.3712: ** &lt;&lt; Usings &gt;&gt;</span>
<a name="l00031"></a>00031 <span class="keyword">using</span> boost::bind;
<a name="l00032"></a>00032 <span class="keyword">using</span> boost::program_options::bool_switch;
<a name="l00033"></a>00033 <span class="keyword">using</span> boost::program_options::value;
<a name="l00034"></a>00034 <span class="comment">//@-&lt;&lt; Usings &gt;&gt;</span>
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 <span class="comment">//@+others</span>
<a name="l00037"></a>00037 <span class="comment">//@+node:gcross.20110511190907.3713: ** Classes</span>
<a name="l00038"></a>00038 <span class="comment">//@+node:gcross.20110511190907.3714: *3* InputOptions</span>
<a name="l00039"></a>00039 <span class="comment">//@+node:gcross.20110511190907.3715: *4* Constructors</span>
<a name="l00040"></a>00040 InputOptions::InputOptions()
<a name="l00041"></a>00041   : Options(<span class="stringliteral">&quot;Input options&quot;</span>)
<a name="l00042"></a>00042 {
<a name="l00043"></a>00043     options.add_options()
<a name="l00044"></a>00044         (<span class="stringliteral">&quot;input-file,f&quot;</span>, value&lt;string&gt;()-&gt;notifier(bind(&amp;InputOptions::setInputFilepath,<span class="keyword">this</span>,_1)),
<a name="l00045"></a>00045             <span class="stringliteral">&quot;location of input file\n&quot;</span>
<a name="l00046"></a>00046             <span class="stringliteral">&quot;----------------------\n&quot;</span>
<a name="l00047"></a>00047             <span class="stringliteral">&quot;This value specifies the location of the input file containing the description of the hamiltonian.\n&quot;</span>
<a name="l00048"></a>00048             <span class="stringliteral">&quot;\n&quot;</span>
<a name="l00049"></a>00049             <span class="stringliteral">&quot;If this option is not specified then the hamiltonian will be read from standard input.\n&quot;</span>
<a name="l00050"></a>00050         )
<a name="l00051"></a>00051 
<a name="l00052"></a>00052         (<span class="stringliteral">&quot;input-format&quot;</span>, value&lt;string&gt;()-&gt;notifier(bind(&amp;InputOptions::setInputFormat,<span class="keyword">this</span>,_1)),
<a name="l00053"></a>00053             <span class="stringliteral">&quot;format of input file\n&quot;</span>
<a name="l00054"></a>00054             <span class="stringliteral">&quot;--------------------\n&quot;</span>
<a name="l00055"></a>00055             <span class="stringliteral">&quot;This value specifies the format of the file containing the description of the hamiltonian.\n&quot;</span>
<a name="l00056"></a>00056             <span class="stringliteral">&quot;\n&quot;</span>
<a name="l00057"></a>00057             <span class="stringliteral">&quot;If this option is not specified, then the format will be inferred from the extension of the input file, or assumed to be YAML if the hamiltonian is being read from standard input.\n&quot;</span>
<a name="l00058"></a>00058         )
<a name="l00059"></a>00059 
<a name="l00060"></a>00060         (<span class="stringliteral">&quot;input-location&quot;</span>, value&lt;string&gt;()-&gt;notifier(bind(&amp;InputOptions::setInputLocation,<span class="keyword">this</span>,_1)),
<a name="l00061"></a>00061             <span class="stringliteral">&quot;location within the input file\n&quot;</span>
<a name="l00062"></a>00062             <span class="stringliteral">&quot;------------------------------\n&quot;</span>
<a name="l00063"></a>00063             <span class="stringliteral">&quot;This value specifies the location of the hamiltonian description within the input file;  note that this option is only sensible for semi-structured hierarchal file formats which can contain multiple kinds of data at multiple locations.\n&quot;</span>
<a name="l00064"></a>00064             <span class="stringliteral">&quot;\n&quot;</span>
<a name="l00065"></a>00065             <span class="stringliteral">&quot;If this option is not specified, then the hamiltonian will be assumed to be located at the root of the file.\n&quot;</span>
<a name="l00066"></a>00066 )
<a name="l00067"></a>00067     ;
<a name="l00068"></a>00068 }
<a name="l00069"></a>00069 <span class="comment">//@+node:gcross.20110511190907.3723: *4* Fields</span>
<a name="l00070"></a>00070 <span class="keywordtype">void</span> InputOptions::setInputFilepath(<span class="keywordtype">string</span> <span class="keyword">const</span>&amp; input_filepath) { maybe_input_filepath = input_filepath; }
<a name="l00071"></a>00071 <span class="keywordtype">void</span> InputOptions::setInputFormat(<span class="keywordtype">string</span> <span class="keyword">const</span>&amp; input_format) { maybe_input_format = input_format; }
<a name="l00072"></a>00072 <span class="keywordtype">void</span> InputOptions::setInputLocation(<span class="keywordtype">string</span> <span class="keyword">const</span>&amp; input_location) { maybe_input_location = input_location; }
<a name="l00073"></a>00073 
<a name="l00074"></a>00074 optional&lt;string&gt; <span class="keyword">const</span>&amp; InputOptions::getInputMaybeFilepath()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> maybe_input_filepath; }
<a name="l00075"></a>00075 optional&lt;string&gt; <span class="keyword">const</span>&amp; InputOptions::getInputMaybeFormat()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> maybe_input_format; }
<a name="l00076"></a>00076 optional&lt;string&gt; <span class="keyword">const</span>&amp; InputOptions::getInputMaybeLocation()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> maybe_input_location; }
<a name="l00077"></a>00077 <span class="comment">//@+node:gcross.20110511190907.3817: *4* Format</span>
<a name="l00078"></a>00078 InputFormat <span class="keyword">const</span>&amp; InputOptions::resolveInputFormat()<span class="keyword"> const </span>{
<a name="l00079"></a>00079     <span class="keywordflow">return</span>
<a name="l00080"></a>00080         resolveAndCheckFormat&lt;InputFormat&gt;(
<a name="l00081"></a>00081             getInputMaybeFormat(),
<a name="l00082"></a>00082             getInputMaybeFilepath(),
<a name="l00083"></a>00083             getInputMaybeLocation()
<a name="l00084"></a>00084         );
<a name="l00085"></a>00085 }
<a name="l00086"></a>00086 
<a name="l00087"></a>00087 Operator InputOptions::readOperatorUsingInputFormat(InputFormat <span class="keyword">const</span>&amp; input_format)<span class="keyword"> const </span>{
<a name="l00088"></a>00088     <span class="keywordflow">return</span> input_format(getInputMaybeFilepath(),getInputMaybeLocation());
<a name="l00089"></a>00089 }
<a name="l00090"></a>00090 <span class="comment">//@+node:gcross.20110511190907.3733: *3* OutputOptions</span>
<a name="l00091"></a>00091 <span class="comment">//@+node:gcross.20110511190907.3734: *4* Constructors</span>
<a name="l00092"></a>00092 OutputOptions::OutputOptions()
<a name="l00093"></a>00093   : Options(<span class="stringliteral">&quot;Output options&quot;</span>)
<a name="l00094"></a>00094 {
<a name="l00095"></a>00095     options.add_options()
<a name="l00096"></a>00096         (<span class="stringliteral">&quot;output-file,o&quot;</span>, value&lt;string&gt;()-&gt;notifier(bind(&amp;OutputOptions::setOutputFilepath,<span class="keyword">this</span>,_1)),
<a name="l00097"></a>00097             <span class="stringliteral">&quot;location of output file\n&quot;</span>
<a name="l00098"></a>00098             <span class="stringliteral">&quot;-----------------------\n&quot;</span>
<a name="l00099"></a>00099             <span class="stringliteral">&quot;This value specifies the location of the output file to which the results of the simulation should be written.\n&quot;</span>
<a name="l00100"></a>00100             <span class="stringliteral">&quot;\n&quot;</span>
<a name="l00101"></a>00101             <span class="stringliteral">&quot;If this option is not specified then the results will be written to standard output.\n&quot;</span>
<a name="l00102"></a>00102         )
<a name="l00103"></a>00103         (<span class="stringliteral">&quot;output-format&quot;</span>, value&lt;string&gt;()-&gt;notifier(bind(&amp;OutputOptions::setOutputFormat,<span class="keyword">this</span>,_1)),
<a name="l00104"></a>00104             <span class="stringliteral">&quot;format of output file\n&quot;</span>
<a name="l00105"></a>00105             <span class="stringliteral">&quot;---------------------\n&quot;</span>
<a name="l00106"></a>00106             <span class="stringliteral">&quot;This value specifies the output format for the results.\n&quot;</span>
<a name="l00107"></a>00107             <span class="stringliteral">&quot;\n&quot;</span>
<a name="l00108"></a>00108             <span class="stringliteral">&quot;If this option is not specified, then the format will be inferred from the extension of the output file, or assumed to be TEXT if the results are being written to standard output.\n&quot;</span>
<a name="l00109"></a>00109         )
<a name="l00110"></a>00110         (<span class="stringliteral">&quot;output-location&quot;</span>, value&lt;string&gt;()-&gt;notifier(bind(&amp;OutputOptions::setOutputLocation,<span class="keyword">this</span>,_1)),
<a name="l00111"></a>00111             <span class="stringliteral">&quot;location within the output file\n&quot;</span>
<a name="l00112"></a>00112             <span class="stringliteral">&quot;-------------------------------\n&quot;</span>
<a name="l00113"></a>00113             <span class="stringliteral">&quot;This value specifies the location to which the results should be written within the output file;  note that this option is only sensible for semi-structured hierarchal file formats which can contain multiple kinds of data at multiple locations.\n&quot;</span>
<a name="l00114"></a>00114             <span class="stringliteral">&quot;\n&quot;</span>
<a name="l00115"></a>00115             <span class="stringliteral">&quot;If this option is not specified, then the hamiltonian will be assumed to be located at the root of the file.\n&quot;</span>
<a name="l00116"></a>00116         )
<a name="l00117"></a>00117         (<span class="stringliteral">&quot;output-states&quot;</span>, bool_switch(&amp;output_states)-&gt;default_value(<span class="keyword">false</span>)-&gt;implicit_value(<span class="keyword">true</span>),
<a name="l00118"></a>00118             <span class="stringliteral">&quot;state output flag\n&quot;</span>
<a name="l00119"></a>00119             <span class="stringliteral">&quot;-----------------\n&quot;</span>
<a name="l00120"></a>00120             <span class="stringliteral">&quot;This flag indicates that states should be output in addition to the energy levels.\n&quot;</span>
<a name="l00121"></a>00121             <span class="stringliteral">&quot;\n&quot;</span>
<a name="l00122"></a>00122             <span class="stringliteral">&quot;If this option is not specified, then only the energy levels will be output.\n&quot;</span>
<a name="l00123"></a>00123         )
<a name="l00124"></a>00124         (<span class="stringliteral">&quot;output-overwrite&quot;</span>, bool_switch(&amp;output_overwrite)-&gt;default_value(<span class="keyword">false</span>)-&gt;implicit_value(<span class="keyword">true</span>),
<a name="l00125"></a>00125             <span class="stringliteral">&quot;overwrite output flag\n&quot;</span>
<a name="l00126"></a>00126             <span class="stringliteral">&quot;---------------------\n&quot;</span>
<a name="l00127"></a>00127             <span class="stringliteral">&quot;This flag indicates that any existing data at the output file and location should be overwritten.  If this flag is false (or omitted), then Nutcracker will exit if existing data is detected at the output file and location.  (Note that for some formats, such as hdf, is possible to output data to the same file at different locations, and in such cases this flag will be ignored.)\n&quot;</span>
<a name="l00128"></a>00128             <span class="stringliteral">&quot;\n&quot;</span>
<a name="l00129"></a>00129             <span class="stringliteral">&quot;If this option is not specified, then it defaults to false --- that is, existing data will be protected against being overwritten.\n&quot;</span>
<a name="l00130"></a>00130         )
<a name="l00131"></a>00131     ;
<a name="l00132"></a>00132 }
<a name="l00133"></a>00133 <span class="comment">//@+node:gcross.20110511190907.3735: *4* Fields</span>
<a name="l00134"></a>00134 <span class="keywordtype">void</span> OutputOptions::setOutputFilepath(<span class="keywordtype">string</span> <span class="keyword">const</span>&amp; output_filepath) { maybe_output_filepath = output_filepath; }
<a name="l00135"></a>00135 <span class="keywordtype">void</span> OutputOptions::setOutputFormat(<span class="keywordtype">string</span> <span class="keyword">const</span>&amp; output_format) { maybe_output_format = output_format; }
<a name="l00136"></a>00136 <span class="keywordtype">void</span> OutputOptions::setOutputLocation(<span class="keywordtype">string</span> <span class="keyword">const</span>&amp; output_location) { maybe_output_location = output_location; }
<a name="l00137"></a>00137 
<a name="l00138"></a>00138 optional&lt;string&gt; <span class="keyword">const</span>&amp; OutputOptions::getOutputMaybeFilepath()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> maybe_output_filepath; }
<a name="l00139"></a>00139 optional&lt;string&gt; <span class="keyword">const</span>&amp; OutputOptions::getOutputMaybeFormat()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> maybe_output_format; }
<a name="l00140"></a>00140 optional&lt;string&gt; <span class="keyword">const</span>&amp; OutputOptions::getOutputMaybeLocation()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> maybe_output_location; }
<a name="l00141"></a>00141 <span class="keywordtype">bool</span> OutputOptions::getOutputStates()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> output_states; }
<a name="l00142"></a>00142 <span class="keywordtype">bool</span> OutputOptions::getOutputOverwrite()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> output_overwrite; }
<a name="l00143"></a>00143 <span class="comment">//@+node:gcross.20110511190907.3813: *4* Format</span>
<a name="l00144"></a>00144 OutputFormat <span class="keyword">const</span>&amp; OutputOptions::resolveOutputFormat()<span class="keyword"> const </span>{
<a name="l00145"></a>00145     OutputFormat <span class="keyword">const</span>&amp; output_format =
<a name="l00146"></a>00146         resolveAndCheckFormat&lt;OutputFormat&gt;(
<a name="l00147"></a>00147             getOutputMaybeFormat(),
<a name="l00148"></a>00148             getOutputMaybeFilepath(),
<a name="l00149"></a>00149             getOutputMaybeLocation()
<a name="l00150"></a>00150         );
<a name="l00151"></a>00151 
<a name="l00152"></a>00152     <span class="keywordflow">if</span>(getOutputStates() &amp;&amp; !output_format.supports_states)
<a name="l00153"></a>00153         <span class="keywordflow">throw</span> OutputFormatDoesNotSupportStatesError(output_format.name);
<a name="l00154"></a>00154 
<a name="l00155"></a>00155     <span class="keywordflow">return</span> output_format;
<a name="l00156"></a>00156 }
<a name="l00157"></a>00157 
<a name="l00158"></a>00158 auto_ptr&lt;Destructable const&gt; OutputOptions::connectToChainUsingOutputFormat(OutputFormat <span class="keyword">const</span>&amp; output_format, Chain&amp; chain) {
<a name="l00159"></a>00159     <span class="keywordflow">return</span>
<a name="l00160"></a>00160         output_format(
<a name="l00161"></a>00161             getOutputMaybeFilepath(),
<a name="l00162"></a>00162             getOutputMaybeLocation(),
<a name="l00163"></a>00163             getOutputStates(),
<a name="l00164"></a>00164             getOutputOverwrite(),
<a name="l00165"></a>00165             chain
<a name="l00166"></a>00166         );
<a name="l00167"></a>00167 }
<a name="l00168"></a>00168 <span class="comment">//@+node:gcross.20110511190907.3751: *3* ToleranceOptions</span>
<a name="l00169"></a>00169 <span class="comment">//@+node:gcross.20110511190907.3752: *4* Constructors</span>
<a name="l00170"></a>00170 ToleranceOptions::ToleranceOptions()
<a name="l00171"></a>00171   : Options(<span class="stringliteral">&quot;Input options&quot;</span>)
<a name="l00172"></a>00172   , chain_options(Chain::defaults)
<a name="l00173"></a>00173 {
<a name="l00174"></a>00174     options.add_options()
<a name="l00175"></a>00175         (<span class="stringliteral">&quot;site-tolerance&quot;</span>, value&lt;double&gt;(&amp;chain_options.site_convergence_threshold),(format(
<a name="l00176"></a>00176             <span class="stringliteral">&quot;site convergence tolerance\n&quot;</span>
<a name="l00177"></a>00177             <span class="stringliteral">&quot;--------------------------\n&quot;</span>
<a name="l00178"></a>00178             <span class="stringliteral">&quot;This value specifies the tolerance used when optimizing individual sites.  Specifically, the ARPACK eigenvalue solver (which is invoked to optimize each site in the chain) uses this value to decide how close it needs to get to the true minimum eigenvalue before declaring victory.\n&quot;</span>
<a name="l00179"></a>00179             <span class="stringliteral">&quot;\n&quot;</span>
<a name="l00180"></a>00180             <span class="stringliteral">&quot;If this options is not specified then it defaults to %1%.\n&quot;</span>
<a name="l00181"></a>00181          ) % Chain::defaults.site_convergence_threshold).str().c_str()
<a name="l00182"></a>00182         )
<a name="l00183"></a>00183         (<span class="stringliteral">&quot;sweep-tolerance&quot;</span>, value&lt;double&gt;(&amp;chain_options.sweep_convergence_threshold),(format(
<a name="l00184"></a>00184             <span class="stringliteral">&quot;sweep convergence tolerance\n&quot;</span>
<a name="l00185"></a>00185             <span class="stringliteral">&quot;---------------------------\n&quot;</span>
<a name="l00186"></a>00186             <span class="stringliteral">&quot;This value specifies the tolerance used when performing optimization sweeps on the chain.  Specifically, Nutcracker will sweep back and forth through the state optimizing sites until the difference in energy between two successive sweeps is less than this threshold.\n&quot;</span>
<a name="l00187"></a>00187             <span class="stringliteral">&quot;\n&quot;</span>
<a name="l00188"></a>00188             <span class="stringliteral">&quot;If this options is not specified then it defaults to %1%.\n&quot;</span>
<a name="l00189"></a>00189          ) % Chain::defaults.sweep_convergence_threshold).str().c_str()
<a name="l00190"></a>00190         )
<a name="l00191"></a>00191         (<span class="stringliteral">&quot;chain-tolerance&quot;</span>, value&lt;double&gt;(&amp;chain_options.chain_convergence_threshold),(format(
<a name="l00192"></a>00192             <span class="stringliteral">&quot;chain convergence tolerance\n&quot;</span>
<a name="l00193"></a>00193             <span class="stringliteral">&quot;---------------------------\n&quot;</span>
<a name="l00194"></a>00194             <span class="stringliteral">&quot;This value specifies the tolerance used when optimizing the chain.  Specifically, Nutcracker will keep increasing the bandwidth of the chain and performing optimization sweeps until the difference in energy between the current and previous bandwidth has fallen within this tolerance.\n&quot;</span>
<a name="l00195"></a>00195             <span class="stringliteral">&quot;\n&quot;</span>
<a name="l00196"></a>00196             <span class="stringliteral">&quot;If this options is not specified then it defaults to %1%.\n&quot;</span>
<a name="l00197"></a>00197          ) % Chain::defaults.chain_convergence_threshold).str().c_str()
<a name="l00198"></a>00198         )
<a name="l00199"></a>00199         (<span class="stringliteral">&quot;sanity-tolerance&quot;</span>, value&lt;double&gt;(&amp;chain_options.sanity_check_threshold),(format(
<a name="l00200"></a>00200             <span class="stringliteral">&quot;sanity check tolerance\n&quot;</span>
<a name="l00201"></a>00201             <span class="stringliteral">&quot;----------------------\n&quot;</span>
<a name="l00202"></a>00202             <span class="stringliteral">&quot;This value specifies the tolerance used when performing sanity checks throughout the optimization run;  sanity checks include making sure that the state is always normalized, making sure that excited states are perpendicular to the ground state, making sure that the eigenvalue solver returns an eigenvalue that is less than the old eigenvalue and consistent with the contraction of the environment, etc.  If one of the sanity checks sees a divergence that exceeds this threshold then the optimization of the site fails.\n&quot;</span>
<a name="l00203"></a>00203             <span class="stringliteral">&quot;\n&quot;</span>
<a name="l00204"></a>00204             <span class="stringliteral">&quot;If this options is not specified then it defaults to %1%.\n&quot;</span>
<a name="l00205"></a>00205          ) % Chain::defaults.sanity_check_threshold).str().c_str()
<a name="l00206"></a>00206         )
<a name="l00207"></a>00207     ;
<a name="l00208"></a>00208 }
<a name="l00209"></a>00209 <span class="comment">//@+node:gcross.20110511190907.3753: *4* Fields</span>
<a name="l00210"></a>00210 <span class="keywordtype">double</span> ToleranceOptions::getToleranceSite()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> chain_options.site_convergence_threshold; }
<a name="l00211"></a>00211 <span class="keywordtype">double</span> ToleranceOptions::getToleranceSweep()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> chain_options.sweep_convergence_threshold; }
<a name="l00212"></a>00212 <span class="keywordtype">double</span> ToleranceOptions::getToleranceChain()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> chain_options.chain_convergence_threshold;}
<a name="l00213"></a>00213 <span class="keywordtype">double</span> ToleranceOptions::getToleranceSanity()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> chain_options.sanity_check_threshold; }
<a name="l00214"></a>00214 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ToleranceOptions::getToleranceIterations()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> chain_options.maximum_number_of_iterations; }
<a name="l00215"></a>00215 
<a name="l00216"></a>00216 Chain::Options <span class="keyword">const</span>&amp; ToleranceOptions::getToleranceChainOptions()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> chain_options; }
<a name="l00217"></a>00217 <span class="comment">//@-others</span>
<a name="l00218"></a>00218 
<a name="l00219"></a>00219 }
<a name="l00220"></a>00220 <span class="comment">//@-leo</span>
</pre></div></div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Tue May 31 2011 16:30:04 for Nutcracker by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
